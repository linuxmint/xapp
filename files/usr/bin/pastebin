#!/usr/bin/python3

import sys
import json
import urllib.request as request

content = sys.stdin.read()

if not content:
    sys.exit(1)

url = ['io', 'glot', 'https://snippets']
url.reverse()
url = '{0}/snippets'.format('.'.join(url))

try:
    content = dict(name='System Info', content=content)
    data = dict(language='Bash', public=True, files=[content])
    headers = {'Content-Type': 'application/json'}

    req = request.Request(url, headers=headers, data=json.dumps(data).encode('utf-8'))

    response = request.urlopen(req)
    response = json.loads(response.read().decode('utf8'))

    sys.stdout.write('{0}/{1}'.format(url, response['id']))

    sys.exit(0)
except Exception as err:
    sys.exit(1)




